# VNCviewer
共享我的屏幕给大家看

# Feiq
局域网的QQ,可以下载上面共享的文件

# VM + Ubuntu
- **VM**: 威睿公司发明一款虚拟机的软件
- **Ubuntu**: 基于Linux内核的带图形界面的Linux操作系统

## 实现共享文件夹的设置
- **共享文件夹**: 用来实现你的电脑和虚拟机之间的互通
- **设置步骤**:
    1. 在自己的电脑上创建一个文件夹
    2. 打开虚拟机
        - 左上角Player -> 管理 -> 虚拟机设置 -> 选项 -> 选择共享文件夹 -> 点击添加 -> 添加你刚刚创建的那个文件夹

# 项目介绍
## 电子相册
- 实现显示图片和滑动切换图片的功能
- **编程语言**: C语言
- **会用到的知识点**:
    - Ubuntu的使用
    - 文件IO
    - BMP图片显示
    - 开发板的滑动触摸
    - 交叉开发

# Linux的基础操作
## 打开终端
- 终端是整个Ubuntu操作的核心
- 它是用户和内核之间的桥梁
    - 用户在终端上输入指令，内核就会收到指令，并且对指令做出反馈，再显示到终端上

## Linux的文件系统
- "一切皆文件"
- Linux是一个树形的组织，以根目录"/"为树的根
- 在Linux下的文件和目录都有一个对应的路径
    - **绝对路径**: 以根目录开头的路径名
        - 共享文件夹的路径: `/mnt/hgfs/共享文件夹名字`
    - **相对路径**: 不以根目录开头的路径名
        - 相对于当前所在目录的上一个: `../`
        - 当前的目录: `./`

## 几个简单的Linux基础指令
- **ls**: 列举一个目录下所有文件的文件名
    - 使用方法: `ls` 回车
- **cd**: 切换目录
    - 使用方法: `cd 你要切换的那个路径`
    - 例子: `cd /mnt/hgfs/你的共享文件夹`
- **rm**: 删除文件或目录
    - 删除文件: `rm 要删除的文件名`
    - 删除目录: `rm -rf 要删除的目录名`
- **gcc指令**: 用来编译C程序
    - `gcc/arm-linux-gcc 需要编译的.c文件` 回车
        - 会生成一个叫做a.out的可执行文件
        - `./a.out` 执行可执行文件
    - `gcc/arm-linux-gcc 需要编译的.c文件 -o 你要指定的可执行文件名`
        - 会生成一个指定的可执行的文件名
        - `./可执行文件名`

## 练习
在Ubuntu上编译一个C程序
1. 在你的共享文件夹中创建一个.c文件
2. 编写好你的C程序并且在虚拟机中进入你的共享文件夹，找到你的.c程序

# 交叉开发
## 连接使用开发板
请大家下载一个USB转串口驱动和secure文件夹

### 什么是交叉开发?
- 开发一个项目的时候，有两台计算机，一台计算机负责编写和编译代码(Ubuntu)，另外一台计算机负责运行这个编写好的程序
- 在一个环境下进行代码的编写和编译，在另外一个环境上进行代码的运行
- 在Ubuntu上进行代码的编译(x86)，在ARM开发板上进行程序的运行(ARM)
- 在进行交叉开发的时候，编译程序的指令需要从`gcc` -> `arm-linux-gcc`

### 连接开发板
1. 把电源接好，用串口线连接电脑和开发板
2. 安装USB转串口驱动
3. 打开设备管理器
    - 右键win图标 -> 端口 -> USB-SERIAL CH340(COMx)
    - 驱动已经安装完成
4. 打开secure文件夹
    - 找到SecureCRT.exe的应用程序
    - 点击运行SecureCRT
    - 点击文件 -> 快速连接
    - 协议: serial
    - 端口: 选择你刚刚查看到的那个端口
    - 波特率: 115200
    - 其他的不用变
    - 右边的流控去掉
    - 点击连接，如果出现了绿色的√就是连接成功了
    - 按下ctrl+c进入终端界面
    - 如果连接失败，先把波特率改成9600，连接成功之后断开，再选择115200进行连接

### 传输可执行文件到开发板上运行
通过串口进行通信
1. 准备好可执行程序进行传输，由arm-linux-gcc得来的可执行程序
2. 创建一个属于自己的工作目录
    - 以后每次连接开发板就是进入工作目录
    - `cd /IOT` 回车
    - 再输入指令 `mkdir 你的文件夹的名字`
    - 以后每次进入开发板都请先输入指令 `cd /IOT/你自己创建的工作目录`
3. 准备一个可执行文件进行传输
    - 这个可执行文件必须是arm-linux-gcc编译得来的可执行程序
    - 在secure上执行
        1. `rx 你要传输的文件名` 回车
        2. 选择传输 -> 发送xmodem -> 选中你的要发送的可执行文件 -> 点击发送
        3. 执行之前需要添加可执行权限 `chmod +x 你的可执行文件名`

# LCD显示屏
## 显示屏的原理
- 尺寸: 7寸
- 分辨率: 800x480 (每一行有800个像素点，总共有480行)
- 像素点: 能够显示某种颜色的点

### 如何来操作LCD的显示屏?
- 6818开发板带了一个OS, Linux, 操作系统的作用就是能够让我们不需要过多的去关注硬件，只需要把显示颜色的代码写好，OS会自己实现硬件相关的细节

### 如何来描述一个颜色值?
- 所有的颜色都是由三基色来组成: 红、绿、蓝
- 在像素点中，每个颜色分量占1个字节(8bits) 0x00 - 0xff
- 描述一个最红的红色: 红 0xff, 绿 0x00, 蓝 0x00 => 0xff0000
- 在LCD显示屏中的像素点，除了三个颜色分量，还有一个字节的数据透明度
- 一个像素点占四个字节 ARGB
    - `int color;`
    - `color = 0xff0000;`

### OS的作用
- 为了实现能够对不同的硬件也可以实现相同的操作，在OS中，有人就提出来在内存中开辟一块区域，上面用来保存每个像素点的颜色值，在通过应用程序把颜色值写入到这块内存中
- 这块内存至少有多大: 800x480x4 (LCD一共有800x480个像素点，每一个像素点占4个字节)
- 这一块内存在Linux中被称做: 帧缓冲 Frame Buffer
- 帧缓冲其实就是对具体的图像显示设备的一种抽象，它让上层应用不需要关心具体的硬件实现细节
    - 帧缓冲的工作原理: 在内存区域填充合适的颜色，帧缓冲的驱动就会慢慢把颜色刷新到屏幕上

### 帧缓冲这块内存到底该如何操作?
- 在Linux中，其实有一个底层的驱动文件对应着
- 在开发板的 `/dev/fb0`
- 只需要把颜色写入到fb0文件中，底层帧缓冲驱动就会把颜色刷新到屏幕上

### 准备一个颜色数组
```c
int color[800*480] = {0};
int i;
for(i = 0; i < 800*480; i++) {
    color[i] = 0xff0000;
}